"use strict";exports.id=801,exports.ids=[801],exports.modules={2801:(e,s,a)=>{a.d(s,{C:()=>b});var t=a(326),r=a(7577),l=a(5047),i=a(1021),c=a(3679),n=a(3279),d=a(7863),x=a(5442),m=a(4659),o=a(1470),h=a(6333),p=a(1540);let g=(0,a(6557).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);var u=a(7358),y=a(9635),j=a(6283),f=a(617),N=a(4802),v=a(1896);let b=({audit:e})=>{let s=(0,l.useRouter)(),{addToast:a}=(0,n.p)(),[b,k]=(0,r.useState)(!1),w=(0,d.yp)(e.pass_percentage>=80),Z=e.pass_percentage>=80?m.Z:o.Z,_=e.resultaten.reduce((e,s)=>{if(!s.checklist_item)return console.warn("Missing checklist_item for result:",s),e;let a=s.checklist_item.categorie;return e[a]||(e[a]=[]),e[a].push(s),e},{}),z=async()=>{try{k(!0);let{data:s,error:t}=await x.O.from("rapporten").insert({audit_id:e.id,status:"pending",verstuurd_naar:[e.district_manager.email]}).select().single();if(t)throw t;a({title:"Rapport gegenereerd",message:"Het rapport wordt voorbereid en verzonden",variant:"success"})}catch(e){a({title:"Rapport fout",message:"Er is een fout opgetreden bij het genereren van het rapport",variant:"error"})}finally{k(!1)}};return(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)(c.z,{variant:"ghost",onClick:()=>s.back(),className:"mb-4",children:[t.jsx(h.Z,{className:"h-4 w-4 mr-2"}),"Terug"]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Audit Details"}),(0,t.jsxs)("p",{className:"text-gray-600",children:[e.filiaal.naam," - ",e.filiaal.locatie]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Door: ",e.district_manager.naam," â€¢ ",(0,d.p6)(e.audit_datum)]})]}),t.jsx("div",{className:"flex items-center space-x-3",children:(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(Z,{className:`h-5 w-5 ${w.color}`}),t.jsx("span",{className:`text-lg font-semibold ${w.color}`,children:w.text})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Score: ",(0,d.o6)(e.totale_score),"/5.0 (",(0,d.rl)(e.pass_percentage),")"]})]})})]})]}),(0,t.jsxs)("div",{className:"mb-6 flex flex-wrap gap-3",children:[(0,t.jsxs)(c.z,{onClick:()=>{a({title:"PDF Export",message:"PDF export functionaliteit wordt ge\xefmplementeerd",variant:"info"})},children:[t.jsx(p.Z,{className:"h-4 w-4 mr-2"}),"Export PDF"]}),(0,t.jsxs)(c.z,{variant:"secondary",onClick:z,disabled:b,children:[t.jsx(g,{className:"h-4 w-4 mr-2"}),b?"Genereren...":"Verstuur Rapport"]})]}),(0,t.jsxs)(i.Zb,{className:"mb-6",children:[t.jsx(i.Ol,{children:t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Audit Samenvatting"})}),(0,t.jsxs)(i.eW,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx("img",{src:"/logo_poule.png",alt:"Poule & Poulette Logo",className:"h-5 w-auto"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Filiaal"}),t.jsx("p",{className:"font-medium",children:e.filiaal.naam})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(u.Z,{className:"h-5 w-5 text-gray-400"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Datum"}),t.jsx("p",{className:"font-medium",children:(0,d.p6)(e.audit_datum)})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(y.Z,{className:"h-5 w-5 text-gray-400"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Auditor"}),t.jsx("p",{className:"font-medium",children:e.district_manager.naam})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(j.Z,{className:"h-5 w-5 text-gray-400"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),t.jsx("p",{className:"font-medium capitalize",children:e.status})]})]})]}),e.opmerkingen&&(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Algemene Opmerkingen"}),t.jsx("p",{className:"text-sm text-gray-600",children:e.opmerkingen})]})]})]}),t.jsx("div",{className:"space-y-6",children:Object.entries(_).map(([e,s])=>(0,t.jsxs)(i.Zb,{children:[t.jsx(i.Ol,{children:t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:e})}),t.jsx(i.eW,{children:t.jsx("div",{className:"space-y-4",children:s.map(e=>{let s="ok"===e.resultaat?m.Z:o.Z,a="ok"===e.resultaat?"text-success-600":"text-danger-600";return e.checklist_item?(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[t.jsx(s,{className:`h-5 w-5 mt-0.5 ${a}`}),(0,t.jsxs)("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-medium text-gray-900",children:e.checklist_item.titel}),t.jsx("p",{className:"text-sm text-gray-600",children:e.checklist_item.beschrijving})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[t.jsx("span",{className:`badge ${"ok"===e.resultaat?"badge-success":"badge-danger"}`,children:"ok"===e.resultaat?"OK":"Niet OK"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Score: ",e.score,"/5"]})]})]}),e.opmerkingen&&t.jsx("div",{className:"mb-3",children:(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[t.jsx(f.Z,{className:"h-4 w-4 text-gray-400 mt-0.5"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Opmerkingen"}),t.jsx("p",{className:"text-sm text-gray-600",children:e.opmerkingen})]})]})}),e.verbeterpunt&&t.jsx("div",{className:"mb-3",children:(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[t.jsx(N.Z,{className:"h-4 w-4 text-warning-600 mt-0.5"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Verbeterpunt"}),t.jsx("p",{className:"text-sm text-gray-600",children:e.verbeterpunt})]})]})}),e.foto_urls&&e.foto_urls.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx(v.Z,{className:"h-4 w-4 text-gray-400"}),(0,t.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["Foto's (",e.foto_urls.length,")"]})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:e.foto_urls.map((e,s)=>t.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:t.jsx("img",{src:e,alt:`Audit foto ${s+1}`,className:"w-full h-full object-cover cursor-pointer hover:opacity-75 transition-opacity",onClick:()=>window.open(e,"_blank")})},s))})]})]},e.id):null})})})]},e))}),e.rapport&&(0,t.jsxs)(i.Zb,{className:"mt-6",children:[t.jsx(i.Ol,{children:t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Rapport Status"})}),t.jsx(i.eW,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Status: ",t.jsx("span",{className:"font-medium capitalize",children:e.rapport.status})]}),e.rapport.verstuur_datum&&(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Verzonden: ",(0,d.p6)(e.rapport.verstuur_datum)]})]}),e.rapport.rapport_url&&(0,t.jsxs)(c.z,{variant:"secondary",onClick:()=>window.open(e.rapport.rapport_url,"_blank"),children:[t.jsx(p.Z,{className:"h-4 w-4 mr-2"}),"Download Rapport"]})]})})]})]})}},3679:(e,s,a)=>{a.d(s,{z:()=>l});var t=a(326),r=a(7577);let l=a.n(r)().forwardRef(({className:e,variant:s="primary",size:a="md",loading:r,children:l,disabled:i,...c},n)=>(0,t.jsxs)("button",{className:`inline-flex items-center justify-center font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${{primary:"bg-black text-white hover:bg-[#c59a6d] focus:ring-[#c59a6d]",secondary:"bg-black text-white border border-black hover:bg-[#c59a6d] focus:ring-[#c59a6d]",success:"bg-success-600 text-white hover:bg-success-700 focus:ring-success-500",warning:"bg-warning-600 text-white hover:bg-warning-700 focus:ring-warning-500",danger:"bg-danger-600 text-white hover:bg-danger-700 focus:ring-danger-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[s]} ${{sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[a]} ${e||""}`,style:{borderRadius:0},ref:n,disabled:i||r,...c,children:[r&&(0,t.jsxs)("svg",{className:"w-4 h-4 mr-2 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l]}));l.displayName="Button"},1021:(e,s,a)=>{a.d(s,{Ol:()=>c,Zb:()=>i,eW:()=>n});var t=a(326),r=a(7577),l=a.n(r);let i=l().forwardRef(({className:e,children:s,...a},r)=>t.jsx("div",{ref:r,className:`card ${e||""}`,...a,children:s}));i.displayName="Card";let c=l().forwardRef(({className:e,children:s,...a},r)=>t.jsx("div",{ref:r,className:`card-header ${e||""}`,...a,children:s}));c.displayName="CardHeader";let n=l().forwardRef(({className:e,children:s,...a},r)=>t.jsx("div",{ref:r,className:`card-body ${e||""}`,...a,children:s}));n.displayName="CardBody",l().forwardRef(({className:e,children:s,...a},r)=>t.jsx("div",{ref:r,className:`card-footer ${e||""}`,...a,children:s})).displayName="CardFooter"},7863:(e,s,a)=>{function t(e){return new Date(e).toLocaleDateString("nl-NL",{year:"numeric",month:"long",day:"numeric"})}function r(e){return e.toFixed(1)}function l(e){return`${e.toFixed(1)}%`}function i(e){return e?{text:"Pass",color:"text-success-600"}:{text:"Fail",color:"text-danger-600"}}a.d(s,{o6:()=>r,p6:()=>t,rl:()=>l,yp:()=>i})},6333:(e,s,a)=>{a.d(s,{Z:()=>t});let t=(0,a(6557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7358:(e,s,a)=>{a.d(s,{Z:()=>t});let t=(0,a(6557).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},1896:(e,s,a)=>{a.d(s,{Z:()=>t});let t=(0,a(6557).Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},4659:(e,s,a)=>{a.d(s,{Z:()=>t});let t=(0,a(6557).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1540:(e,s,a)=>{a.d(s,{Z:()=>t});let t=(0,a(6557).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},6283:(e,s,a)=>{a.d(s,{Z:()=>t});let t=(0,a(6557).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},4802:(e,s,a)=>{a.d(s,{Z:()=>t});let t=(0,a(6557).Z)("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]])},617:(e,s,a)=>{a.d(s,{Z:()=>t});let t=(0,a(6557).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},9635:(e,s,a)=>{a.d(s,{Z:()=>t});let t=(0,a(6557).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1470:(e,s,a)=>{a.d(s,{Z:()=>t});let t=(0,a(6557).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},5047:(e,s,a)=>{var t=a(7389);a.o(t,"usePathname")&&a.d(s,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(s,{useSearchParams:function(){return t.useSearchParams}})}};
(()=>{var e={};e.id=702,e.ids=[702],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},4839:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c}),s(9521),s(9623),s(5866);var a=s(3191),r=s(8716),i=s(7922),l=s.n(i),n=s(5231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let c=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9521)),"/Users/dietmar/Desktop/pp ops -- intern audit/app/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9623)),"/Users/dietmar/Desktop/pp ops -- intern audit/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/dietmar/Desktop/pp ops -- intern audit/app/dashboard/page.tsx"],x="/dashboard/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5546:(e,t,s)=>{Promise.resolve().then(s.bind(s,7494))},7494:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>P});var a=s(326),r=s(7577),i=s(5047),l=s(2711),n=s(2894),d=s(1021),c=s(7863);let o=({kpiData:e,filiaalNaam:t})=>{if(!e)return a.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[1,2,3,4].map(e=>a.jsx(d.Zb,{className:"animate-pulse",children:a.jsx(d.eW,{className:"p-4",children:a.jsx("div",{className:"h-16 bg-neutral-200 rounded"})})},e))});let s=[{title:"Totaal Audits",value:e.totaal_audits.toString(),description:"Uitgevoerde audits"},{title:"Gemiddelde Score",value:(0,c.o6)(e.gemiddelde_score),description:"Op schaal van 0-5"},{title:"Pass Percentage",value:(0,c.rl)(e.pass_percentage),description:"Audits met score â‰¥ 80%"},{title:"Verbeterpunten",value:e.verbeterpunten.length.toString(),description:"Terugkerende problemen"}];return(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:s.map((e,t)=>a.jsx(d.Zb,{className:"hover:shadow-md transition-shadow",children:a.jsx(d.eW,{className:"p-4",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-xs font-medium text-neutral-600 mb-1",children:e.title}),a.jsx("p",{className:"text-lg font-semibold text-neutral-900 mb-1",children:e.value}),a.jsx("p",{className:"text-xs text-neutral-500 leading-tight",children:e.description})]})})},t))}),e.verbeterpunten.length>0&&a.jsx(d.Zb,{children:(0,a.jsxs)(d.eW,{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-neutral-900 mb-4",children:["Top Verbeterpunten - ",t]}),a.jsx("div",{className:"space-y-3",children:e.verbeterpunten.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-warning-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-neutral-900",children:e.item}),(0,a.jsxs)("p",{className:"text-sm text-neutral-600",children:["Laatste voorkomen: ",new Date(e.laatste_voorkomen).toLocaleDateString("nl-NL")]})]}),a.jsx("div",{className:"ml-4",children:(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-warning-100 text-warning-800",children:[e.frequentie,"x"]})})]},t))})]})})]})};var x=s(3679),m=s(6283),u=s(4659),p=s(1470),h=s(7358),g=s(9635),j=s(2714),y=s(8091),v=s(8998),f=s(1625);let N=({audits:e,filiaalId:t,onAuditDeleted:s})=>{let n=(0,i.useRouter)(),{user:o}=(0,l.a)(),[N,b]=(0,r.useState)(null),k=e=>{n.push(`/audits/${e}`)},w=()=>{t&&"all"!==t?n.push(`/audits/new?filiaal=${t}`):n.push("/audits/new")},_=async e=>{if(o&&"admin"===o.rol&&confirm("Weet je zeker dat je deze audit wilt verwijderen? Deze actie kan niet ongedaan worden gemaakt."))try{b(e),await f.l.deleteAudit(e),s&&s()}catch(e){console.error("Error deleting audit:",e),alert("Er is een fout opgetreden bij het verwijderen van de audit.")}finally{b(null)}};return 0===e.length?a.jsx(d.Zb,{children:a.jsx(d.eW,{children:(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(m.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Geen audits gevonden"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Er zijn nog geen audits uitgevoerd voor dit filiaal."}),a.jsx(x.z,{onClick:w,children:"Nieuwe Audit Starten"})]})})}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recente Audits"}),a.jsx(x.z,{onClick:w,children:"Nieuwe Audit"})]}),a.jsx("div",{className:"space-y-3",children:e.map(e=>{let t=(0,c.yp)(e.pass_percentage>=80),s=e.pass_percentage>=80?u.Z:p.Z;return a.jsx(d.Zb,{className:"hover:shadow-md transition-shadow",children:(0,a.jsxs)(d.eW,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx(s,{className:`h-5 w-5 ${t.color}`}),(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Audit van ",(0,c.p6)(e.audit_datum)]}),a.jsx("span",{className:`badge ${e.pass_percentage>=80?"badge-success":"badge-danger"}`,children:t.text})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(h.Z,{className:"h-4 w-4"}),a.jsx("span",{children:(0,c.p6)(e.audit_datum)})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(g.Z,{className:"h-4 w-4"}),a.jsx("span",{children:e.district_manager?.naam||"Onbekend"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{children:["Score: ",(0,c.o6)(e.totale_score),"/5.0"]}),(0,a.jsxs)("span",{children:["(",(0,c.rl)(e.pass_percentage),")"]})]})]}),e.opmerkingen&&a.jsx("p",{className:"mt-2 text-sm text-gray-600 line-clamp-2",children:e.opmerkingen})]}),(0,a.jsxs)("div",{className:"ml-4 flex items-center space-x-2",children:[(0,a.jsxs)(x.z,{variant:"ghost",size:"sm",onClick:()=>k(e.id),children:[a.jsx(j.Z,{className:"h-4 w-4 mr-1"}),"Bekijken"]}),o?.rol==="admin"&&(0,a.jsxs)(x.z,{variant:"ghost",size:"sm",onClick:()=>_(e.id),disabled:N===e.id,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[a.jsx(y.Z,{className:"h-4 w-4"}),N===e.id?"Verwijderen...":""]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{className:"text-gray-500",children:["Status: ","completed"===e.status?"Voltooid":"in_progress"===e.status?"Bezig":"Geannuleerd"]}),(0,a.jsxs)("span",{className:"text-gray-500",children:["Aangemaakt: ",(0,c.p6)(e.created_at)]})]}),"in_progress"===e.status&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-warning-600",children:[a.jsx(v.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"In behandeling"})]})]})})]})},e.id)})})]})};var b=s(1714),k=s(3116),w=s(2896),_=s(3771);let Z=()=>{let{user:e}=(0,l.a)(),[t,s]=(0,r.useState)([]),[i,c]=(0,r.useState)(""),[x,m]=(0,r.useState)([]),[u,p]=(0,r.useState)(null),[h,g]=(0,r.useState)(!0),[j,y]=(0,r.useState)(""),[v,Z]=(0,r.useState)({datum_van:"",datum_tot:"",score_min:"",score_max:"",status:""});(0,r.useEffect)(()=>{e&&P()},[e]),(0,r.useEffect)(()=>{i&&(z(),A())},[i,v]);let P=async()=>{try{g(!0);let t=await f.l.getFilialen();s(t),t.length>0&&(e?.rol==="admin"||e?.rol==="coo"||e?.rol==="district_manager"?c("all"):c(t[0].id))}catch(e){y("Fout bij het laden van filialen"),console.error("Error loading filialen:",e)}finally{g(!1)}},z=async()=>{try{let e=await f.l.getAudits({filiaalId:"all"===i?void 0:i});v.datum_van&&(e=e.filter(e=>e.audit_datum>=v.datum_van)),v.datum_tot&&(e=e.filter(e=>e.audit_datum<=v.datum_tot)),v.score_min&&(e=e.filter(e=>e.totale_score>=parseFloat(v.score_min))),v.score_max&&(e=e.filter(e=>e.totale_score<=parseFloat(v.score_max))),v.status&&("pass"===v.status?e=e.filter(e=>e.pass_percentage>=80):"fail"===v.status&&(e=e.filter(e=>e.pass_percentage<80))),m(e)}catch(e){y("Fout bij het laden van audits"),console.error("Error loading audits:",e)}},A=async()=>{try{let e=await f.l.getKPIData("all"===i?void 0:i);p(e)}catch(e){console.error("Error loading KPI data:",e)}};if(h)return a.jsx(w.T,{});if(j)return a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsx(_.b,{variant:"error",children:j})})});let S="all"===i?null:t.find(e=>e.id===i);return(0,a.jsxs)("div",{className:"min-h-screen bg-white",children:[a.jsx(n.x,{user:e}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-20",children:[a.jsx(d.Zb,{className:"mb-8",children:a.jsx(d.Ol,{children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h1",{className:"text-3xl font-semibold text-neutral-900 mb-2",children:"Dashboard"}),a.jsx("p",{className:"text-neutral-600",children:"Overzicht van alle audit activiteiten"})]})})}),a.jsx("div",{className:"mb-8",children:a.jsx(b.r,{filialen:t,selectedFiliaal:i,onFiliaalChange:e=>{c(e)},userRole:e?.rol})}),a.jsx("div",{className:"mb-8",children:a.jsx(o,{kpiData:u,filiaalNaam:"all"===i?"Alle Filialen":S?.naam||""})}),a.jsx("div",{className:"mb-20",children:a.jsx(N,{audits:x,filiaalId:i,onAuditDeleted:z})})]}),a.jsx(k.$,{filiaalId:i})]})};function P(){let{user:e,loading:t}=(0,l.a)();return((0,i.useRouter)(),t)?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(w.T,{})}):e?a.jsx(Z,{}):null}},1714:(e,t,s)=>{"use strict";s.d(t,{r:()=>l});var a=s(326);s(7577);var r=s(1021);let i=(0,s(6557).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),l=({filialen:e,selectedFiliaal:t,onFiliaalChange:s,userRole:l})=>{let n=e.find(e=>e.id===t);return a.jsx(r.Zb,{children:a.jsx(r.eW,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[a.jsx("div",{className:"flex items-center space-x-3",children:(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[a.jsx("h2",{className:"text-sm sm:text-lg font-semibold text-gray-900",children:"Geselecteerd Filiaal"}),"all"===t?a.jsx("p",{className:"text-xs sm:text-sm text-gray-600 truncate",children:"Alle Filialen"}):n?a.jsx("p",{className:"text-xs sm:text-sm text-gray-600 truncate",children:n.naam}):null]})}),(0,a.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,a.jsxs)("select",{value:t,onChange:e=>s(e.target.value),className:"appearance-none bg-white border border-gray-300 rounded-md px-3 py-2 pr-8 text-xs sm:text-sm font-medium text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 w-full sm:w-auto min-w-[140px]",children:["admin"===l&&a.jsx("option",{value:"all",children:"Alle Filialen"}),e.map(e=>a.jsx("option",{value:e.id,children:e.naam},e.id))]}),a.jsx(i,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})]})})})}},7863:(e,t,s)=>{"use strict";function a(e){return new Date(e).toLocaleDateString("nl-NL",{year:"numeric",month:"long",day:"numeric"})}function r(e){return e.toFixed(1)}function i(e){return`${e.toFixed(1)}%`}function l(e){return e?{text:"Pass",color:"text-success-600"}:{text:"Fail",color:"text-danger-600"}}s.d(t,{o6:()=>r,p6:()=>a,rl:()=>i,yp:()=>l})},7888:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},7202:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},7358:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},4659:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8998:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2714:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6283:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},8019:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},5290:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},8091:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},1470:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},5047:(e,t,s)=>{"use strict";var a=s(7389);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},9521:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`/Users/dietmar/Desktop/pp ops -- intern audit/app/dashboard/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[994,897,941],()=>s(4839));module.exports=a})();
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{2258:function(e,t,r){Promise.resolve().then(r.bind(r,1618)),Promise.resolve().then(r.bind(r,3637)),Promise.resolve().then(r.t.bind(r,4742,23)),Promise.resolve().then(r.t.bind(r,7960,23))},1618:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return l},a:function(){return i}});var o=r(7437),n=r(2265),s=r(1181);let a=(0,n.createContext)(void 0),i=()=>{let e=(0,n.useContext)(a);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},l=e=>{let{children:t}=e,[r,i]=(0,n.useState)(null),[l,u]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let e=async()=>{try{if("undefined"==typeof localStorage){console.log("\uD83C\uDF10 Server-side rendering detected, skipping auth check"),u(!1);return}let e=localStorage.getItem("audit_user");if(console.log("\uD83D\uDD0D Checking existing session..."),console.log("\uD83D\uDCE6 Saved user from localStorage:",e),e)try{let t=JSON.parse(e);console.log("\uD83D\uDC64 Parsed user:",t),console.log("\uD83D\uDD04 Using saved user directly (skipping database lookup)"),i(t),console.log("✅ User set from localStorage")}catch(e){console.error("❌ Error parsing localStorage user:",e),localStorage.removeItem("audit_user")}else console.log("\uD83D\uDCED No saved user found in localStorage")}catch(e){console.error("❌ Error in checkExistingSession:",e)}finally{console.log("\uD83C\uDFC1 Setting loading to false"),u(!1)}},t=setTimeout(()=>{console.log("⏰ Auth check timeout, setting loading to false"),u(!1)},3e3);e().finally(()=>{clearTimeout(t)})},[]);let c=async e=>{try{if("undefined"==typeof localStorage)return{success:!1,error:"Server-side rendering not supported"};let t=await s.l.getUserByEmail(e);if(t){let e={id:t.id,user_id:t.email,naam:t.naam,rol:t.rol,telefoon:t.telefoon,actief:t.actief,created_at:t.created_at,updated_at:t.updated_at};if(!e.actief)return{success:!1,error:"Account is gedeactiveerd"};return i(e),localStorage.setItem("audit_user",JSON.stringify(e)),{success:!0}}let r={ADMIN:{id:"00000000-0000-0000-0000-000000000001",user_id:"ADMIN",naam:"Admin User",rol:"admin",telefoon:"+32 123 456 789",actief:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},MAN01:{id:"00000000-0000-0000-0000-000000000002",user_id:"MAN01",naam:"COO Manager",rol:"coo",telefoon:"+32 123 456 790",actief:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},MAN02:{id:"00000000-0000-0000-0000-000000000003",user_id:"MAN02",naam:"District Manager",rol:"district_manager",telefoon:"+32 123 456 791",actief:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},USER1:{id:"00000000-0000-0000-0000-000000000004",user_id:"USER1",naam:"User",rol:"user",telefoon:"+32 123 456 792",actief:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}[e];if(!r)return{success:!1,error:"User ID niet gevonden"};if(!r.actief)return{success:!1,error:"Account is gedeactiveerd"};return i(r),localStorage.setItem("audit_user",JSON.stringify(r)),{success:!0}}catch(e){return{success:!1,error:"Er is een fout opgetreden bij het inloggen"}}},d=async()=>{i(null),"undefined"!=typeof localStorage&&localStorage.removeItem("audit_user")},g=async e=>{try{if(console.log("\uD83D\uDD04 updateUser called with updates:",e),!r)return console.log("❌ No user logged in"),{success:!1,error:"Geen gebruiker ingelogd"};if("undefined"==typeof localStorage)return{success:!1,error:"Server-side rendering not supported"};console.log("\uD83D\uDC64 Current user:",r),console.log("\uD83D\uDD0D Updating user in database with ID:",r.id);let t=await s.l.updateUser(r.id,e);if(console.log("\uD83D\uDCBE Database update result:",t),!t)return console.log("❌ User not found in database"),{success:!1,error:"Gebruiker niet gevonden"};let o={id:t.id,user_id:t.email,naam:t.naam,rol:t.rol,telefoon:t.telefoon,actief:t.actief,created_at:t.created_at,updated_at:t.updated_at};return console.log("✅ Converted to authUser:",o),console.log("\uD83D\uDCBE Updating localStorage..."),i(o),localStorage.setItem("audit_user",JSON.stringify(o)),console.log("✅ User updated successfully in both state and localStorage"),{success:!0}}catch(e){return console.error("❌ Error updating user:",e),{success:!1,error:"Er is een fout opgetreden bij het bijwerken van het profiel"}}};return(0,o.jsx)(a.Provider,{value:{user:r,loading:l,signOut:d,signIn:c,updateUser:g},children:t})}},3637:function(e,t,r){"use strict";r.d(t,{ToastProvider:function(){return l},p:function(){return i}});var o=r(7437),n=r(2265),s=r(2489);let a=(0,n.createContext)(void 0),i=()=>{let e=(0,n.useContext)(a);if(!e)throw Error("useToast must be used within a ToastProvider");return e},l=e=>{let{children:t}=e,[r,i]=(0,n.useState)([]),l=(0,n.useCallback)(e=>{let t=Math.random().toString(36).substring(2,9),r={...e,id:t};i(e=>[...e,r]),setTimeout(()=>{u(t)},e.duration||5e3)},[]),u=(0,n.useCallback)(e=>{i(t=>t.filter(t=>t.id!==e))},[]);return(0,o.jsxs)(a.Provider,{value:{toasts:r,addToast:l,removeToast:u},children:[t,(0,o.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:r.map(e=>(0,o.jsx)("div",{className:"max-w-sm w-full bg-white shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden",children:(0,o.jsx)("div",{className:"p-4",children:(0,o.jsxs)("div",{className:"flex items-start",children:[(0,o.jsxs)("div",{className:"flex-1",children:[e.title&&(0,o.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,o.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:e.message})]}),(0,o.jsx)("div",{className:"ml-4 flex-shrink-0 flex",children:(0,o.jsxs)("button",{className:"bg-white rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",onClick:()=>u(e.id),children:[(0,o.jsx)("span",{className:"sr-only",children:"Sluiten"}),(0,o.jsx)(s.Z,{className:"h-5 w-5"})]})})]})})},e.id))})]})}},9763:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var o=r(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=(e,t)=>{let r=(0,o.forwardRef)((r,a)=>{let{color:i="currentColor",size:l=24,strokeWidth:u=2,absoluteStrokeWidth:c,children:d,...g}=r;return(0,o.createElement)("svg",{ref:a,...n,width:l,height:l,stroke:i,strokeWidth:c?24*Number(u)/Number(l):u,className:"lucide lucide-".concat(s(e)),...g},[...t.map(e=>{let[t,r]=e;return(0,o.createElement)(t,r)}),...(Array.isArray(d)?d:[d])||[]])});return r.displayName="".concat(e),r}},2489:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});let o=(0,r(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},7960:function(){},4742:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}}},function(e){e.O(0,[540,887,181,971,117,744],function(){return e(e.s=2258)}),_N_E=e.O()}]);
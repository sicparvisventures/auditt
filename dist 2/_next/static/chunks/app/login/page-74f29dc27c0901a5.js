(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{910:function(e,r,t){Promise.resolve().then(t.bind(t,6374))},6374:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return d}});var s=t(7437),a=t(2265),n=t(9376),o=t(1618),i=t(4226),c=t(8068),l=t(5225),u=t(5863);function d(){let[e,r]=(0,a.useState)(""),[t,d]=(0,a.useState)(!1),[g,f]=(0,a.useState)(""),m=(0,n.useRouter)(),{signIn:h}=(0,o.a)(),p=async r=>{r.preventDefault(),d(!0),f("");try{let r=await h(e);r.success?(m.push("/dashboard"),m.refresh()):f(r.error||"Inloggen mislukt")}catch(e){f("Er is een onverwachte fout opgetreden")}finally{d(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-cover bg-center bg-no-repeat py-12 px-4 sm:px-6 lg:px-8",style:{backgroundImage:"url(/pp1.jpg)"},children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50"}),(0,s.jsxs)("div",{className:"relative z-10 max-w-md w-full space-y-8 -mt-24",children:[(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("div",{className:"bg-black bg-opacity-90 rounded-lg p-6 shadow-lg",children:[(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("img",{src:"/logo.svg",alt:"Poule & Poulette Logo",className:"h-16 w-auto"})}),(0,s.jsx)("p",{className:"mt-2 text-sm text-white",children:"Interne Audit Tool"})]})}),(0,s.jsx)("div",{className:"mt-8 bg-black border border-gray-600 rounded-lg shadow-sm",children:(0,s.jsx)("div",{className:"px-6 py-4",children:(0,s.jsxs)("form",{className:"space-y-6",onSubmit:p,children:[g&&(0,s.jsx)(l.b,{variant:"error",className:"bg-red-950 border-red-800 text-red-100",children:g}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"userId",className:"block text-sm font-medium text-white mb-1",children:"User ID"}),(0,s.jsx)(c.I,{id:"userId",name:"userId",type:"text",autoComplete:"username",required:!0,value:e,onChange:e=>r(e.target.value.toUpperCase()),placeholder:"Voer uw 5-cijferige User ID in",maxLength:5,className:"bg-white border-gray-300 text-gray-900 placeholder-gray-500 focus:border-primary-500 focus:ring-primary-500"})]}),(0,s.jsx)("div",{children:(0,s.jsx)(i.z,{type:"submit",className:"w-full bg-[#c59a6d] hover:bg-[#b08a5a] text-black font-semibold",disabled:t,children:t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Inloggen..."]}):"Inloggen"})})]})})}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Voor technische ondersteuning,"," ",(0,s.jsx)("a",{href:"mailto:sicparvisventures@gmail.com?subject=Technische ondersteuning Interne Audit Tool&body=Hallo,%0D%0A%0D%0AIk heb technische ondersteuning nodig voor de Interne Audit Tool.%0D%0A%0D%0ABeschrijf hier uw probleem:%0D%0A%0D%0AMet vriendelijke groet",className:"text-[#c59a6d] hover:text-[#b08a5a] underline transition-colors duration-200",children:"klik hier"})]})})]})]})}},1618:function(e,r,t){"use strict";t.d(r,{AuthProvider:function(){return c},a:function(){return i}});var s=t(7437),a=t(2265),n=t(1181);let o=(0,a.createContext)(void 0),i=()=>{let e=(0,a.useContext)(o);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},c=e=>{let{children:r}=e,[t,i]=(0,a.useState)(null),[c,l]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=async()=>{try{if("undefined"==typeof localStorage){console.log("\uD83C\uDF10 Server-side rendering detected, skipping auth check"),l(!1);return}let e=localStorage.getItem("audit_user");if(console.log("\uD83D\uDD0D Checking existing session..."),console.log("\uD83D\uDCE6 Saved user from localStorage:",e),e)try{let r=JSON.parse(e);console.log("\uD83D\uDC64 Parsed user:",r),console.log("\uD83D\uDD04 Using saved user directly (skipping database lookup)"),i(r),console.log("✅ User set from localStorage")}catch(e){console.error("❌ Error parsing localStorage user:",e),localStorage.removeItem("audit_user")}else console.log("\uD83D\uDCED No saved user found in localStorage")}catch(e){console.error("❌ Error in checkExistingSession:",e)}finally{console.log("\uD83C\uDFC1 Setting loading to false"),l(!1)}},r=setTimeout(()=>{console.log("⏰ Auth check timeout, setting loading to false"),l(!1)},3e3);e().finally(()=>{clearTimeout(r)})},[]);let u=async e=>{try{if("undefined"==typeof localStorage)return{success:!1,error:"Server-side rendering not supported"};let r=await n.l.getUserByEmail(e);if(r){let e={id:r.id,user_id:r.email,naam:r.naam,rol:r.rol,telefoon:r.telefoon,actief:r.actief,created_at:r.created_at,updated_at:r.updated_at};if(!e.actief)return{success:!1,error:"Account is gedeactiveerd"};return i(e),localStorage.setItem("audit_user",JSON.stringify(e)),{success:!0}}let t={ADMIN:{id:"00000000-0000-0000-0000-000000000001",user_id:"ADMIN",naam:"Admin User",rol:"admin",telefoon:"+32 123 456 789",actief:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},MAN01:{id:"00000000-0000-0000-0000-000000000002",user_id:"MAN01",naam:"COO Manager",rol:"coo",telefoon:"+32 123 456 790",actief:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},MAN02:{id:"00000000-0000-0000-0000-000000000003",user_id:"MAN02",naam:"District Manager",rol:"district_manager",telefoon:"+32 123 456 791",actief:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},USER1:{id:"00000000-0000-0000-0000-000000000004",user_id:"USER1",naam:"User",rol:"user",telefoon:"+32 123 456 792",actief:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}[e];if(!t)return{success:!1,error:"User ID niet gevonden"};if(!t.actief)return{success:!1,error:"Account is gedeactiveerd"};return i(t),localStorage.setItem("audit_user",JSON.stringify(t)),{success:!0}}catch(e){return{success:!1,error:"Er is een fout opgetreden bij het inloggen"}}},d=async()=>{i(null),"undefined"!=typeof localStorage&&localStorage.removeItem("audit_user")},g=async e=>{try{if(console.log("\uD83D\uDD04 updateUser called with updates:",e),!t)return console.log("❌ No user logged in"),{success:!1,error:"Geen gebruiker ingelogd"};if("undefined"==typeof localStorage)return{success:!1,error:"Server-side rendering not supported"};console.log("\uD83D\uDC64 Current user:",t),console.log("\uD83D\uDD0D Updating user in database with ID:",t.id);let r=await n.l.updateUser(t.id,e);if(console.log("\uD83D\uDCBE Database update result:",r),!r)return console.log("❌ User not found in database"),{success:!1,error:"Gebruiker niet gevonden"};let s={id:r.id,user_id:r.email,naam:r.naam,rol:r.rol,telefoon:r.telefoon,actief:r.actief,created_at:r.created_at,updated_at:r.updated_at};return console.log("✅ Converted to authUser:",s),console.log("\uD83D\uDCBE Updating localStorage..."),i(s),localStorage.setItem("audit_user",JSON.stringify(s)),console.log("✅ User updated successfully in both state and localStorage"),{success:!0}}catch(e){return console.error("❌ Error updating user:",e),{success:!1,error:"Er is een fout opgetreden bij het bijwerken van het profiel"}}};return(0,s.jsx)(o.Provider,{value:{user:t,loading:c,signOut:d,signIn:u,updateUser:g},children:r})}},5225:function(e,r,t){"use strict";t.d(r,{b:function(){return l}});var s=t(7437),a=t(2265),n=t(5302),o=t(3639),i=t(2252),c=t(3245);let l=a.forwardRef((e,r)=>{let{className:t,variant:a="info",children:l,...u}=e,d={success:n.Z,warning:o.Z,error:i.Z,info:c.Z}[a];return(0,s.jsxs)("div",{ref:r,className:"flex items-start p-4 border rounded-md ".concat({success:"bg-success-50 border-success-200 text-success-800",warning:"bg-warning-50 border-warning-200 text-warning-800",error:"bg-danger-50 border-danger-200 text-danger-800",info:"bg-blue-50 border-blue-200 text-blue-800"}[a]," ").concat(t||""),...u,children:[(0,s.jsx)(d,{className:"w-5 h-5 mr-3 mt-0.5 flex-shrink-0"}),(0,s.jsx)("div",{className:"flex-1",children:l})]})});l.displayName="Alert"},4226:function(e,r,t){"use strict";t.d(r,{z:function(){return a}});var s=t(7437);let a=t(2265).forwardRef((e,r)=>{let{className:t,variant:a="primary",size:n="md",loading:o,children:i,disabled:c,...l}=e;return(0,s.jsxs)("button",{className:"".concat("inline-flex items-center justify-center font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-black text-white hover:bg-[#c59a6d] focus:ring-[#c59a6d]",secondary:"bg-black text-white border border-black hover:bg-[#c59a6d] focus:ring-[#c59a6d]",success:"bg-success-600 text-white hover:bg-success-700 focus:ring-success-500",warning:"bg-warning-600 text-white hover:bg-warning-700 focus:ring-warning-500",danger:"bg-danger-600 text-white hover:bg-danger-700 focus:ring-danger-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[a]," ").concat({sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[n]," ").concat(t||""),style:{borderRadius:0},ref:r,disabled:c||o,...l,children:[o&&(0,s.jsxs)("svg",{className:"w-4 h-4 mr-2 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i]})});a.displayName="Button"},8068:function(e,r,t){"use strict";t.d(r,{I:function(){return a}});var s=t(7437);let a=t(2265).forwardRef((e,r)=>{let{className:t,type:a,error:n,label:o,...i}=e;return(0,s.jsxs)("div",{className:"w-full",children:[o&&(0,s.jsx)("label",{className:"form-label",children:o}),(0,s.jsx)("input",{type:a,className:"form-input ".concat(n?"border-danger-300 focus:border-danger-500 focus:ring-danger-500":""," ").concat(t||""),ref:r,...i}),n&&(0,s.jsx)("p",{className:"form-error",children:n})]})});a.displayName="Input"},9763:function(e,r,t){"use strict";t.d(r,{Z:function(){return o}});var s=t(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=(e,r)=>{let t=(0,s.forwardRef)((t,o)=>{let{color:i="currentColor",size:c=24,strokeWidth:l=2,absoluteStrokeWidth:u,children:d,...g}=t;return(0,s.createElement)("svg",{ref:o,...a,width:c,height:c,stroke:i,strokeWidth:u?24*Number(l)/Number(c):l,className:"lucide lucide-".concat(n(e)),...g},[...r.map(e=>{let[r,t]=e;return(0,s.createElement)(r,t)}),...(Array.isArray(d)?d:[d])||[]])});return t.displayName="".concat(e),t}},2252:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(9763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3639:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(9763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},5302:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3245:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(9763).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},5863:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9376:function(e,r,t){"use strict";var s=t(5475);t.o(s,"usePathname")&&t.d(r,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[887,181,971,117,744],function(){return e(e.s=910)}),_N_E=e.O()}]);
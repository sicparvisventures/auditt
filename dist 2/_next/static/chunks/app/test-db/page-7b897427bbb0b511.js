(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[359],{8885:function(e,t,s){Promise.resolve().then(s.bind(s,3286))},3286:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var a=s(7437),n=s(2265),r=s(1181),i=s(4226),c=s(9178);function l(){let[e,t]=(0,n.useState)(!1),[s,l]=(0,n.useState)(""),[o,d]=(0,n.useState)([]),[u,g]=(0,n.useState)([]),h=async()=>{t(!0),l("");try{var e,s,a;console.log("\uD83D\uDD0D Testing database functions...");let t=await r.l.testDatabaseFunctions();if(console.log("\uD83D\uDCCB Test result:",t),t.error){l("Database test failed: ".concat(t.error));return}d(t.audits||[]),g(t.actions||[]);let n=(null===(e=t.functions)||void 0===e?void 0:e.length)||0,i=(null===(s=t.audits)||void 0===s?void 0:s.length)||0,c=(null===(a=t.actions)||void 0===a?void 0:a.length)||0;l("Database test complete. Functions: ".concat(n,", Audits: ").concat(i,", Actions: ").concat(c))}catch(e){console.error("❌ Database test error:",e),l("Error: ".concat(e))}finally{t(!1)}},x=async()=>{t(!0);try{let e={filiaal_id:"test-filiaal",audit_datum:new Date().toISOString().split("T")[0],status:"completed"};console.log("\uD83D\uDD27 Creating test audit...");let t=await r.l.addAudit(e);console.log("✅ Test audit created:",t),console.log("\uD83D\uDD27 Adding test results..."),await r.l.addAuditResults(t,[{checklist_item_id:"test-item-1",resultaat:"niet_ok",score:2,opmerkingen:"Test opmerking",verbeterpunt:"Test verbeterpunt"},{checklist_item_id:"test-item-2",resultaat:"ok",score:1,opmerkingen:"Test opmerking 2",verbeterpunt:"Test verbeterpunt 2"}]),console.log("✅ Test results added"),console.log("\uD83D\uDD27 Creating actions from test audit...");let s=await r.l.createActionsFromAuditResults(t);console.log("✅ Action creation result:",s),l("Test audit created with ID: ".concat(t,". Actions created: ").concat(s));let a=await r.l.getAudits(),n=await r.l.getActions();d(a),g(n)}catch(e){console.error("❌ Test audit creation error:",e),l("Error: ".concat(e))}finally{t(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,a.jsxs)(c.Zb,{children:[(0,a.jsxs)(c.Ol,{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Database Test"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Test database connection and action creation"})]}),(0,a.jsx)(c.eW,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(i.z,{onClick:h,disabled:e,children:e?"Testing...":"Test Database"}),(0,a.jsx)(i.z,{onClick:x,disabled:e,variant:"outline",children:e?"Creating...":"Create Test Audit"}),(0,a.jsx)(i.z,{onClick:async()=>{t(!0);try{let e=await r.l.getAudits();if(e.length>0){let t=e[0];if(console.log("\uD83D\uDD27 Creating actions manually for audit:",t.id),await r.l.createActionsManually(t.id)){l("Actions created manually successfully!");let e=await r.l.testDatabaseFunctions();g(e.actions||[])}else l("Failed to create actions manually")}else l("No audits found to create actions for")}catch(e){l("Error: ".concat(e))}finally{t(!1)}},disabled:e,variant:"outline",children:e?"Creating...":"Create Actions Manually"}),(0,a.jsx)(i.z,{onClick:async()=>{t(!0);try{if(await r.l.createTestAction()){l("Test action created successfully!");let e=await r.l.testDatabaseFunctions();g(e.actions||[])}else l("Failed to create test action")}catch(e){l("Error: ".concat(e))}finally{t(!1)}},disabled:e,variant:"outline",children:e?"Creating...":"Create Test Action"}),s&&(0,a.jsx)("div",{className:"p-4 bg-gray-100 rounded-md",children:(0,a.jsx)("p",{className:"text-sm",children:s})})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)(c.Zb,{children:[(0,a.jsx)(c.Ol,{children:(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Database Functions"})}),(0,a.jsx)(c.eW,{children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Check if the required database functions are installed.",(0,a.jsx)("br",{}),(0,a.jsx)("strong",{children:"Required:"})," create_actions_from_audit_results, determine_action_urgency"]})})]}),(0,a.jsxs)(c.Zb,{children:[(0,a.jsx)(c.Ol,{children:(0,a.jsxs)("h3",{className:"text-lg font-semibold",children:["Audits (",o.length,")"]})}),(0,a.jsx)(c.eW,{children:0===o.length?(0,a.jsx)("p",{className:"text-gray-500",children:"No audits found"}):(0,a.jsx)("div",{className:"space-y-2",children:o.slice(0,3).map((e,t)=>{var s;return(0,a.jsxs)("div",{className:"p-2 bg-gray-50 rounded text-sm",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"ID:"})," ",null===(s=e.id)||void 0===s?void 0:s.substring(0,8),"..."]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Status:"})," ",e.status]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Date:"})," ",e.audit_datum]})]},t)})})})]}),(0,a.jsxs)(c.Zb,{children:[(0,a.jsx)(c.Ol,{children:(0,a.jsxs)("h3",{className:"text-lg font-semibold",children:["Actions (",u.length,")"]})}),(0,a.jsx)(c.eW,{children:0===u.length?(0,a.jsx)("p",{className:"text-gray-500",children:"No actions found"}):(0,a.jsx)("div",{className:"space-y-2",children:u.slice(0,3).map((e,t)=>{var s,n;return(0,a.jsxs)("div",{className:"p-2 bg-gray-50 rounded text-sm",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"ID:"})," ",null===(s=e.id)||void 0===s?void 0:s.substring(0,8),"..."]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Title:"})," ",null===(n=e.titel)||void 0===n?void 0:n.substring(0,20),"..."]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Status:"})," ",e.status]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Urgency:"})," ",e.urgentie]})]},t)})})})]})]})]})})}},4226:function(e,t,s){"use strict";s.d(t,{z:function(){return n}});var a=s(7437);let n=s(2265).forwardRef((e,t)=>{let{className:s,variant:n="primary",size:r="md",loading:i,children:c,disabled:l,...o}=e;return(0,a.jsxs)("button",{className:"".concat("inline-flex items-center justify-center font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-black text-white hover:bg-[#c59a6d] focus:ring-[#c59a6d]",secondary:"bg-black text-white border border-black hover:bg-[#c59a6d] focus:ring-[#c59a6d]",success:"bg-success-600 text-white hover:bg-success-700 focus:ring-success-500",warning:"bg-warning-600 text-white hover:bg-warning-700 focus:ring-warning-500",danger:"bg-danger-600 text-white hover:bg-danger-700 focus:ring-danger-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[n]," ").concat({sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[r]," ").concat(s||""),style:{borderRadius:0},ref:t,disabled:l||i,...o,children:[i&&(0,a.jsxs)("svg",{className:"w-4 h-4 mr-2 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c]})});n.displayName="Button"},9178:function(e,t,s){"use strict";s.d(t,{Ol:function(){return i},Zb:function(){return r},eW:function(){return c}});var a=s(7437),n=s(2265);let r=n.forwardRef((e,t)=>{let{className:s,children:n,...r}=e;return(0,a.jsx)("div",{ref:t,className:"card ".concat(s||""),...r,children:n})});r.displayName="Card";let i=n.forwardRef((e,t)=>{let{className:s,children:n,...r}=e;return(0,a.jsx)("div",{ref:t,className:"card-header ".concat(s||""),...r,children:n})});i.displayName="CardHeader";let c=n.forwardRef((e,t)=>{let{className:s,children:n,...r}=e;return(0,a.jsx)("div",{ref:t,className:"card-body ".concat(s||""),...r,children:n})});c.displayName="CardBody",n.forwardRef((e,t)=>{let{className:s,children:n,...r}=e;return(0,a.jsx)("div",{ref:t,className:"card-footer ".concat(s||""),...r,children:n})}).displayName="CardFooter"}},function(e){e.O(0,[887,181,971,117,744],function(){return e(e.s=8885)}),_N_E=e.O()}]);
exports.id=897,exports.ids=[897],exports.modules={6188:(e,t,r)=>{Promise.resolve().then(r.bind(r,2711)),Promise.resolve().then(r.bind(r,3279))},3569:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},2711:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>n,a:()=>l});var a=r(326),i=r(7577);r(1625);let s=(0,i.createContext)(void 0),l=()=>{let e=(0,i.useContext)(s);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},n=({children:e})=>{let[t,r]=(0,i.useState)(null),[l,n]=(0,i.useState)(!0);(0,i.useEffect)(()=>{let e=async()=>{try{console.log("\uD83C\uDF10 Server-side rendering detected, skipping auth check"),n(!1);return}catch(e){console.error("❌ Error in checkExistingSession:",e)}finally{console.log("\uD83C\uDFC1 Setting loading to false"),n(!1)}},t=setTimeout(()=>{console.log("⏰ Auth check timeout, setting loading to false"),n(!1)},3e3);e().finally(()=>{clearTimeout(t)})},[]);let o=async e=>{try{return{success:!1,error:"Server-side rendering not supported"}}catch(e){return{success:!1,error:"Er is een fout opgetreden bij het inloggen"}}},u=async()=>{r(null)},c=async e=>{try{if(console.log("\uD83D\uDD04 updateUser called with updates:",e),!t)return console.log("❌ No user logged in"),{success:!1,error:"Geen gebruiker ingelogd"};return{success:!1,error:"Server-side rendering not supported"}}catch(e){return console.error("❌ Error updating user:",e),{success:!1,error:"Er is een fout opgetreden bij het bijwerken van het profiel"}}};return a.jsx(s.Provider,{value:{user:t,loading:l,signOut:u,signIn:o,updateUser:c},children:e})}},3279:(e,t,r)=>{"use strict";r.d(t,{ToastProvider:()=>o,p:()=>n});var a=r(326),i=r(7577),s=r(4019);let l=(0,i.createContext)(void 0),n=()=>{let e=(0,i.useContext)(l);if(!e)throw Error("useToast must be used within a ToastProvider");return e},o=({children:e})=>{let[t,r]=(0,i.useState)([]),n=(0,i.useCallback)(e=>{let t=Math.random().toString(36).substring(2,9),a={...e,id:t};r(e=>[...e,a]),setTimeout(()=>{o(t)},e.duration||5e3)},[]),o=(0,i.useCallback)(e=>{r(t=>t.filter(t=>t.id!==e))},[]);return(0,a.jsxs)(l.Provider,{value:{toasts:t,addToast:n,removeToast:o},children:[e,a.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:t.map(e=>a.jsx("div",{className:"max-w-sm w-full bg-white shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden",children:a.jsx("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[e.title&&a.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.title}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:e.message})]}),a.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:(0,a.jsxs)("button",{className:"bg-white rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",onClick:()=>o(e.id),children:[a.jsx("span",{className:"sr-only",children:"Sluiten"}),a.jsx(s.Z,{className:"h-5 w-5"})]})})]})})},e.id))})]})}},1625:(e,t,r)=>{"use strict";r.d(t,{l:()=>n});var a=r(5442);class i{async authenticateUser(e,t){try{let{data:t,error:r}=await a.O.from("gebruikers").select("*").eq("user_id",e).single();if(r||!t)return null;return t}catch(e){return console.error("Authentication error:",e),null}}async getUserById(e){try{let{data:t,error:r}=await a.O.from("gebruikers").select("*").eq("id",e).single();if(r)return null;return t}catch(e){return console.error("Get user error:",e),null}}async getUserByUserId(e){try{let{data:t,error:r}=await a.O.from("gebruikers").select("*").eq("user_id",e).single();if(r)return null;return t}catch(e){return console.error("Get user by user_id error:",e),null}}async getFilialen(e){try{let t=a.O.from("filialen").select("*");e&&(t=t.eq("district_manager_id",e));let{data:r,error:i}=await t;if(i)return console.error("Get filialen error:",i),[];return r}catch(e){return console.error("Get filialen error:",e),[]}}async getFiliaalById(e){try{let{data:t,error:r}=await a.O.from("filialen").select("*").eq("id",e).single();if(r)return null;return t}catch(e){return console.error("Get filiaal error:",e),null}}async getAudits(e){try{let t=a.O.from("audits").select(`
          *,
          filialen:filiaal_id (
            id,
            naam,
            locatie,
            adres,
            telefoon,
            email,
            status
          ),
          gebruikers:district_manager_id (
            id,
            user_id,
            naam,
            rol,
            telefoon,
            actief
          )
        `);e?.filiaalId&&(t=t.eq("filiaal_id",e.filiaalId)),e?.districtManagerId&&(t=t.eq("district_manager_id",e.districtManagerId)),e?.status&&(t=t.eq("status",e.status)),e?.limit&&(t=t.limit(e.limit)),e?.offset&&(t=t.range(e.offset,e.offset+(e.limit||50)-1));let{data:r,error:i}=await t.order("audit_datum",{ascending:!1});if(i)return console.error("Get audits error:",i),[];return(r||[]).map(e=>({...e,filiaal:e.filialen,district_manager:e.gebruikers}))}catch(e){return console.error("Get audits error:",e),[]}}async getAuditById(e){try{let{data:t,error:r}=await a.O.from("audits").select(`
          *,
          filialen:filiaal_id (
            id,
            naam,
            locatie,
            adres,
            telefoon,
            email,
            status
          ),
          gebruikers:district_manager_id (
            id,
            user_id,
            naam,
            rol,
            telefoon,
            actief
          )
        `).eq("id",e).single();if(r)return null;return{...t,filiaal:t.filialen,district_manager:t.gebruikers}}catch(e){return console.error("Get audit error:",e),null}}async createAudit(e){try{let{data:t,error:r}=await a.O.from("audits").insert({filiaal_id:e.filiaal_id,district_manager_id:e.district_manager_id,audit_datum:e.audit_datum,status:e.status||"in_progress",totale_score:e.totale_score||0,pass_percentage:e.pass_percentage||0,opmerkingen:e.opmerkingen}).select().single();if(r)throw r;return t}catch(e){throw console.error("Create audit error:",e),e}}async updateAudit(e,t){try{let{data:r,error:i}=await a.O.from("audits").update(t).eq("id",e).select().single();if(i)return null;return r}catch(e){return console.error("Update audit error:",e),null}}async addAuditResults(e,t){try{await a.O.from("audit_resultaten").delete().eq("audit_id",e);let r=t.map(t=>({audit_id:e,checklist_item_id:t.checklist_item_id,resultaat:t.resultaat,score:"ok"===t.resultaat?5:0,opmerkingen:t.opmerkingen||null,foto_urls:t.foto_urls||[],verbeterpunt:t.verbeterpunt||null})),{error:i}=await a.O.from("audit_resultaten").insert(r);if(i)throw i}catch(e){throw console.error("Add audit results error:",e),e}}async getAuditResults(e){try{let{data:t,error:r}=await a.O.from("audit_resultaten").select("*").eq("audit_id",e);if(r)return console.error("Get audit results error:",r),[];return t||[]}catch(e){return console.error("Get audit results error:",e),[]}}async deleteAudit(e){try{let{error:t}=await a.O.from("audit_resultaten").delete().eq("audit_id",e);if(t)return console.error("Delete audit results error:",t),!1;let{error:r}=await a.O.from("acties").delete().eq("audit_id",e);if(r)return console.error("Delete audit actions error:",r),!1;let{error:i}=await a.O.from("audits").delete().eq("id",e);if(i)return console.error("Delete audit error:",i),!1;return!0}catch(e){return console.error("Delete audit error:",e),!1}}async getChecklistItems(){try{let{data:e,error:t}=await a.O.from("audit_checklist_items").select("*").eq("actief",!0).order("volgorde");if(t)return console.error("Get checklist items error:",t),[];return e}catch(e){return console.error("Get checklist items error:",e),[]}}async getActions(e){try{let t=a.O.from("acties").select(`
        *,
        audits!inner(filiaal_id),
        audit_resultaten!inner(checklist_item_id, resultaat, opmerkingen, verbeterpunt)
      `);e?.filiaalId&&(t=t.eq("audits.filiaal_id",e.filiaalId)),e?.status&&"all"!==e.status&&(t=t.eq("status",e.status)),e?.urgentie&&"all"!==e.urgentie&&(t=t.eq("urgentie",e.urgentie));let{data:r,error:i}=await t.order("created_at",{ascending:!1});if(i)return console.error("Get actions error:",i),[];return r||[]}catch(e){return console.error("Get actions error:",e),[]}}async getActionById(e){try{let{data:t,error:r}=await a.O.from("acties").select(`
          *,
          audits!inner(filiaal_id),
          audit_resultaten!inner(checklist_item_id, resultaat, opmerkingen, verbeterpunt)
        `).eq("id",e).single();if(r)return null;return t}catch(e){return console.error("Get action error:",e),null}}async updateAction(e,t){try{let{data:r,error:i}=await a.O.from("acties").update(t).eq("id",e).select().single();if(i)return null;return r}catch(e){return console.error("Update action error:",e),null}}async getAllUsers(){try{let{data:e,error:t}=await a.O.from("gebruikers").select("*").order("naam");if(t)return console.error("Get all users error:",t),[];return e}catch(e){return console.error("Get all users error:",e),[]}}async createUser(e){try{console.log("Supabase createUser called with:",e);let{data:t,error:r}=await a.O.from("gebruikers").insert({user_id:null,naam:e.naam,rol:e.rol,telefoon:e.telefoon,actief:!0}).select().single();if(r)throw console.error("Supabase createUser error:",r),Error(`Database error: ${r.message}`);return console.log("Supabase createUser success:",t),t}catch(e){throw console.error("Create user error:",e),e}}async deleteUser(e){try{let{error:t}=await a.O.from("gebruikers").delete().eq("id",e);return!t}catch(e){return console.error("Delete user error:",e),!1}}async updateUser(e,t){try{let{data:r,error:i}=await a.O.from("gebruikers").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(i)return console.error("Update user error:",i),null;return r}catch(e){return console.error("Update user error:",e),null}}async getUserByEmail(e){try{console.log("\uD83D\uDD0D Supabase getUserByEmail called with email:",e);let{data:t,error:r}=await a.O.from("gebruikers").select("*").eq("user_id",e).single();if(console.log("\uD83D\uDD0D Supabase getUserByEmail result:",{data:t,error:r}),r)return console.log("❌ Supabase getUserByEmail error:",r),null;return t}catch(e){return console.error("❌ Get user by email error:",e),null}}async getKPIData(e){try{let t=a.O.from("audits").select("id, score, status, audit_datum");e&&(t=t.eq("filiaal_id",e));let{data:r,error:i}=await t;if(i)return console.error("Get audits for KPI error:",i),this.getDefaultKPIData();let s=r?.length||0,l=r?.filter(e=>"voltooid"===e.status)||[],n=l.length>0?l.reduce((e,t)=>e+(t.score||0),0)/l.length:0,o=l.length>0?l.filter(e=>(e.score||0)>=4).length/l.length*100:0,u=a.O.from("acties").select("id, status, urgentie");e&&(u=u.eq("filiaal_id",e));let{data:c,error:d}=await u,g=c||[];g.filter(e=>"pending"===e.status).length,g.filter(e=>"completed"===e.status).length,g.filter(e=>"critical"===e.urgentie).length;let f=[{item:"Koelkast temperatuur",frequentie:3,laatste_voorkomen:new Date().toISOString()},{item:"FIFO controle",frequentie:2,laatste_voorkomen:new Date().toISOString()}];return{totaal_audits:s,gemiddelde_score:n,pass_percentage:o,verbeterpunten:f,trends:[]}}catch(e){return console.error("Get KPI data error:",e),this.getDefaultKPIData()}}getDefaultKPIData(){return{totaal_audits:0,gemiddelde_score:0,pass_percentage:0,verbeterpunten:[],trends:[]}}async uploadFile(e,t="uploads",r){try{let i=e.name.split(".").pop(),s=r||`${Date.now()}-${Math.random().toString(36).substring(2)}.${i}`,l=`audit-photos/${s}`,{error:n}=await a.O.storage.from(t).upload(l,e);if(n)throw n;let{data:{publicUrl:o}}=a.O.storage.from(t).getPublicUrl(l);return{url:o,filename:s}}catch(e){throw console.error("Upload file error:",e),e}}}let s=new i;class l{static getInstance(){return l.instance||(l.instance=new l),l.instance}constructor(){this.isInitialized=!1,this.initialize()}async initialize(){this.isInitialized||(this.isInitialized=!0,console.log("ClientDataService initialized"))}async authenticateUser(e,t){try{let r=await s.authenticateUser(e,t);if(r)return console.log("✅ Supabase authentication successful:",r.user_id),r}catch(e){console.log("❌ Supabase auth failed:",e)}return null}async getUserById(e){try{let t=await s.getUserById(e);if(t)return t}catch(e){console.log("❌ Supabase getUserById failed:",e)}return null}async getFilialen(e){try{return await s.getFilialen(e)}catch(e){return console.log("❌ Supabase getFilialen failed:",e),[]}}async getFiliaalById(e){try{return await s.getFiliaalById(e)}catch(e){return console.log("❌ Supabase getFiliaalById failed:",e),null}}async getAudits(e){try{return await s.getAudits(e)}catch(e){return console.log("❌ Supabase getAudits failed:",e),[]}}async getAuditById(e){try{return await s.getAuditById(e)}catch(e){return console.log("❌ Supabase getAuditById failed:",e),null}}async createAudit(e){try{return await s.createAudit(e)}catch(e){throw console.log("❌ Supabase createAudit failed:",e),e}}async updateAudit(e,t){try{return await s.updateAudit(e,t)}catch(e){return console.log("❌ Supabase updateAudit failed:",e),null}}async getChecklistItems(){try{return await s.getChecklistItems()}catch(e){return console.log("❌ Supabase getChecklistItems failed:",e),[]}}async getKPIData(e){try{return await s.getKPIData(e)}catch(e){return console.log("❌ Supabase getKPIData failed:",e),{totalAudits:0,averageScore:0,passRate:0,pendingActions:0,completedActions:0,criticalActions:0}}}async getActions(e){try{return await s.getActions(e)}catch(e){return console.log("❌ Supabase getActions failed:",e),[]}}async getActionById(e){try{return await s.getActionById(e)}catch(e){return console.log("❌ Supabase getActionById failed:",e),null}}async updateAction(e,t){try{return await s.updateAction(e,t)}catch(e){return console.log("❌ Supabase updateAction failed:",e),null}}async getAllUsers(){try{return await s.getAllUsers()}catch(e){return console.log("❌ Supabase getAllUsers failed:",e),[]}}async createUser(e){try{return await s.createUser(e)}catch(e){throw console.log("❌ Supabase createUser failed:",e),e}}async deleteUser(e){try{return await s.deleteUser(e)}catch(e){return console.log("❌ Supabase deleteUser failed:",e),!1}}async updateUser(e,t){try{return await s.updateUser(e,t)}catch(e){return console.log("❌ Supabase updateUser failed:",e),null}}async getUserByEmail(e){try{return await s.getUserByEmail(e)}catch(e){return console.log("❌ Supabase getUserByEmail failed:",e),null}}async addAuditResults(e,t){try{return await s.addAuditResults(e,t)}catch(e){throw console.log("❌ Supabase addAuditResults failed:",e),e}}async getAuditResults(e){try{return await s.getAuditResults(e)}catch(e){return console.log("❌ Supabase getAuditResults failed:",e),[]}}async deleteAudit(e){try{return await s.deleteAudit(e)}catch(e){throw console.log("❌ Supabase deleteAudit failed:",e),e}}async uploadFile(e){try{return await s.uploadFile(e)}catch(e){throw console.log("❌ Supabase uploadFile failed:",e),e}}}let n=l.getInstance()},5442:(e,t,r)=>{"use strict";r.d(t,{O:()=>a});let a=(0,r(7608).eI)("https://kauerobifkgjvddyrkuz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImthdWVyb2JpZmtnanZkZHlya3V6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkxNTIxODQsImV4cCI6MjA3NDcyODE4NH0.GqMYsz9byBYHw_fqmPYH53E4fyciz3MpdUtDQDhpvd8")},9623:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>u,viewport:()=>c});var a=r(9510),i=r(5384),s=r.n(i);r(7272);var l=r(8570);(0,l.createProxy)(String.raw`/Users/dietmar/Desktop/pp ops -- intern audit/components/providers/AuthProvider.tsx#useAuth`);let n=(0,l.createProxy)(String.raw`/Users/dietmar/Desktop/pp ops -- intern audit/components/providers/AuthProvider.tsx#AuthProvider`);(0,l.createProxy)(String.raw`/Users/dietmar/Desktop/pp ops -- intern audit/components/ui/Toaster.tsx#useToast`);let o=(0,l.createProxy)(String.raw`/Users/dietmar/Desktop/pp ops -- intern audit/components/ui/Toaster.tsx#ToastProvider`);(0,l.createProxy)(String.raw`/Users/dietmar/Desktop/pp ops -- intern audit/components/ui/Toaster.tsx#Toaster`);let u={title:"Poule & Poulette - Interne Audit Tool",description:"Interne audit tool voor district managers van Poule & Poulette filialen",manifest:"/manifest.json",icons:{icon:"/favicon.ico",apple:"/apple-touch-icon.png"}},c={width:"device-width",initialScale:1,maximumScale:1,themeColor:"#f2740a"};function d({children:e}){return a.jsx("html",{lang:"nl",className:"h-full",children:a.jsx("body",{className:`${s().className} h-full bg-gray-50`,children:a.jsx(o,{children:a.jsx(n,{children:a.jsx("div",{className:"min-h-full",children:e})})})})})}},7272:()=>{}};